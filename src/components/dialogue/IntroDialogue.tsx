import GenericDialogue from "./GenericDialogue.tsx";
import {FaRegLightbulb} from "react-icons/fa6";
import {VscExtensions} from "react-icons/vsc";

import OnepointInfo from "./OnepointInfo.tsx";
import onCloseDialogue from "../../lib/dialogFunctions.ts";
import {setSeenIntro} from "../../lib/sessionFunctions.ts";
import {ImSwitch} from "react-icons/im";
import {useTranslation} from "react-i18next";
import InfoIcon from "./InfoIcon.tsx";
import DialogueHeader from "./DialogueHeader.tsx";
import SendImage from "../buttons/SendImage.tsx";
import {SuggestionTemplate} from "../Suggestions.tsx";

export const INTRO_DIALOGUE_ID = "intro-dialogue";

const toolName = " Data Wellness Companion";

function IntroSection({
                        content,
                        children,
                      }: {
  content: React.ReactNode;
  children: React.ReactNode;
}) {
  return (
    <>
      <h3 className="pb-4 pt-2">
        {content}
      </h3>
      {children}
    </>
  );
}

/**
 * The introduction dialogue.
 * @constructor
 */
export default function IntroDialogue() {
  const {t} = useTranslation();
  return (
    <GenericDialogue
      dialogueId={INTRO_DIALOGUE_ID}
      clazz="companion-dialogue"
    >
      <DialogueHeader onClose={() => {
        setSeenIntro();
        onCloseDialogue(INTRO_DIALOGUE_ID)
      }} className="!pl-3 !pr-0 !pt-0">
        <InfoIcon name="intro_dialogue"/>
      </DialogueHeader>
      <section className="mx-3 mt-8">
        <OnepointInfo/>
        <br/>
        <IntroSection
          content={`${t("How can you use the", {toolName: toolName})}`}
        >
          <p>{t("explanation 1", {toolName: toolName})}</p>

          <p>{t("explanation 2")}</p>
          <div className="grid grid-cols-1 md:grid-cols-2 py-3">
            <SuggestionTemplate suggestion={{
              id: 0,
              img_alt: "",
              img_src: "data-quality.svg",
              main_text: t("fake-suggestion-1"),
              title: t("fake-title-1"),
              svg_image: `<svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26.3454 0.0878906C18.9364 0.0878906 11.062 2.06297 11.062 5.72335V22.4334C10.8932 22.596 10.6636 22.6512 10.4285 22.5797C9.60105 22.3284 8.64717 22.5121 7.87699 23.0717C7.1068 23.6313 6.63712 24.4816 6.6205 25.3463C6.61505 25.6307 6.45131 25.856 6.18263 25.949C5.36543 26.2319 4.70185 26.9414 4.40759 27.8467C4.11334 28.7522 4.23313 29.7163 4.72804 30.4255C4.8909 30.6588 4.8909 30.9373 4.72813 31.1706C4.23322 31.8798 4.11342 32.8438 4.40759 33.7492C4.70176 34.6547 5.36525 35.3642 6.18254 35.6472C6.26402 35.6754 6.33442 35.717 6.39506 35.7674L3.49713 40.7871C3.31415 41.1039 3.33102 41.4867 3.54126 41.7859C3.7514 42.0851 4.10578 42.2309 4.46595 42.1664L7.2113 41.674L8.15771 44.2978C8.2819 44.6421 8.5853 44.8761 8.94978 44.9084C8.97826 44.9109 9.00665 44.9122 9.03486 44.9122C9.36629 44.9122 9.66829 44.7391 9.83668 44.4472L12.3286 40.1312C12.6877 40.2721 13.0824 40.3484 13.4906 40.3484H13.4907C13.899 40.3484 14.2937 40.2722 14.6528 40.1312L17.1446 44.4471C17.3132 44.7391 17.6151 44.9121 17.9465 44.9121C17.9747 44.9121 18.0032 44.9108 18.0318 44.9082C18.3962 44.8759 18.6996 44.6419 18.8237 44.2977L19.77 41.674L22.5155 42.1664C22.8754 42.2305 23.2301 42.085 23.4402 41.7857C23.6504 41.4864 23.6672 41.1035 23.4843 40.787L20.5862 35.7674C20.6469 35.7169 20.7174 35.6752 20.7988 35.647C21.1841 35.5136 21.5345 35.2845 21.8288 34.9857C23.2852 35.1431 24.8023 35.2238 26.3458 35.2238C33.7549 35.2238 41.6293 33.2487 41.6293 29.5883V5.72335C41.6289 2.06297 33.7545 0.0878906 26.3454 0.0878906ZM16.261 2.90171C18.9441 1.99397 22.5255 1.49414 26.3454 1.49414C30.1653 1.49414 33.7468 1.99406 36.4299 2.90171C38.8048 3.70512 40.2226 4.75989 40.2226 5.72335C40.2226 6.68672 38.8047 7.74158 36.4299 8.54499C33.7468 9.45272 30.1653 9.95256 26.3454 9.95256C22.5255 9.95256 18.9441 9.45264 16.261 8.54499C13.8861 7.74158 12.4683 6.68681 12.4683 5.72335C12.4683 4.75989 13.8862 3.70512 16.261 2.90171ZM9.13215 42.855L8.3327 40.6388C8.21642 40.3162 7.88411 40.1242 7.54713 40.1853L5.22814 40.6011L6.99211 37.5458C7.20647 37.9187 7.50644 38.2554 7.87681 38.5245C8.64709 39.0841 9.60079 39.268 10.4284 39.0167C10.7006 38.934 10.9654 39.02 11.1369 39.2468C11.1516 39.2661 11.1674 39.2844 11.1826 39.3033L9.13215 42.855ZM19.4338 40.1853C19.0964 40.1242 18.7645 40.3163 18.6482 40.6388L17.8489 42.855L15.7982 39.3034C15.8133 39.2846 15.8292 39.2663 15.8438 39.2469C16.0154 39.0199 16.2802 38.9339 16.5524 39.0166C17.38 39.2682 18.3337 39.0842 19.1039 38.5246C19.4743 38.2555 19.7743 37.9187 19.9888 37.5458L21.7527 40.6011L19.4338 40.1853ZM21.2361 33.3148C21.0773 33.8036 20.7417 34.1787 20.3385 34.3184C19.5145 34.6036 18.9712 35.3513 18.9546 36.2232C18.9464 36.6498 18.6932 37.0848 18.2775 37.3869C17.8617 37.689 17.3699 37.795 16.9614 37.6711C16.1274 37.4177 15.2483 37.7031 14.7223 38.3986C14.4648 38.739 14.0044 38.9422 13.4905 38.9422C12.9765 38.9422 12.516 38.739 12.2586 38.3985C11.8601 37.8715 11.2589 37.5799 10.6279 37.5799C10.4263 37.5799 10.2215 37.6097 10.0194 37.6712C9.61116 37.7953 9.11915 37.6889 8.70334 37.3869C8.28761 37.0847 8.03449 36.6497 8.02631 36.2231C8.0097 35.3513 7.46645 34.6037 6.64239 34.3184C6.23915 34.1787 5.90358 33.8036 5.74476 33.3148C5.58594 32.8259 5.63692 32.3253 5.88117 31.9753C6.38021 31.2602 6.38021 30.3361 5.88117 29.6209C5.63701 29.2709 5.58612 28.7701 5.74485 28.2814C5.90376 27.7926 6.23932 27.4174 6.64256 27.2779C7.46645 26.9927 8.0097 26.245 8.02631 25.3731C8.03458 24.9465 8.2877 24.5114 8.70342 24.2093C9.11915 23.9072 9.61133 23.801 10.0195 23.9251C10.8537 24.1788 11.7327 23.8931 12.2587 23.1975C12.5161 22.8571 12.9765 22.654 13.4905 22.654C14.0045 22.654 14.4649 22.8572 14.7224 23.1976C15.2483 23.8932 16.1269 24.1785 16.9615 23.9251C17.3699 23.8011 17.8617 23.9073 18.2776 24.2094C18.6933 24.5115 18.9465 24.9465 18.9546 25.3732C18.9712 26.245 19.5145 26.9926 20.3385 27.2779C20.7417 27.4175 21.0773 27.7927 21.2361 28.2815C21.3949 28.7703 21.3439 29.271 21.0997 29.6209C20.6007 30.3361 20.6007 31.2602 21.0998 31.9754C21.3439 32.3253 21.3948 32.826 21.2361 33.3148ZM36.43 32.4101C33.7469 33.3178 30.1654 33.8177 26.3455 33.8177C25.0715 33.8177 23.8173 33.7607 22.6029 33.6499C22.8573 32.7738 22.7298 31.854 22.2531 31.1707C22.0902 30.9374 22.0902 30.6589 22.253 30.4256C22.7479 29.7164 22.8677 28.7525 22.5735 27.847C22.4826 27.567 22.3562 27.3059 22.201 27.0702C23.537 27.2018 24.9229 27.2689 26.3455 27.2689C31.8601 27.2689 37.6312 26.1744 40.2228 24.1057V29.5885C40.2227 30.5519 38.8048 31.6068 36.43 32.4101ZM36.43 24.455C33.7469 25.3628 30.1654 25.8626 26.3455 25.8626C24.2515 25.8626 22.2438 25.7124 20.3672 25.4198C20.3643 25.3956 20.3611 25.3715 20.3605 25.3463C20.344 24.4816 19.8744 23.6313 19.1042 23.0717C18.3339 22.5121 17.3802 22.3282 16.5527 22.5795C16.2802 22.6622 16.0155 22.5762 15.8441 22.3494C15.3225 21.6595 14.4427 21.2476 13.4906 21.2476C13.1349 21.2476 12.7892 21.3053 12.4684 21.4133V16.1505C15.0599 18.2193 20.8311 19.3137 26.3456 19.3137C31.8601 19.3137 37.6313 18.2193 40.2228 16.1505V21.6333C40.2227 22.5969 38.8048 23.6517 36.43 24.455ZM36.43 16.5C33.7469 17.4077 30.1654 17.9075 26.3455 17.9075C22.5256 17.9075 18.9442 17.4076 16.2611 16.5C13.8862 15.6966 12.4684 14.6418 12.4684 13.6783V8.19563C15.0599 10.2644 20.8311 11.3588 26.3456 11.3588C31.8601 11.3588 37.6313 10.2644 40.2228 8.19563V13.6784C40.2227 14.6418 38.8048 15.6967 36.43 16.5ZM28.1767 14.6332C28.1767 15.0215 27.8619 15.3363 27.4736 15.3363H25.2173C24.829 15.3363 24.5142 15.0215 24.5142 14.6332C24.5142 14.2449 24.829 13.93 25.2173 13.93H27.4736C27.8619 13.93 28.1767 14.2449 28.1767 14.6332ZM28.1767 22.5882C28.1767 22.9765 27.8619 23.2914 27.4736 23.2914H25.2173C24.829 23.2914 24.5142 22.9765 24.5142 22.5882C24.5142 22.1999 24.829 21.8851 25.2173 21.8851H27.4736C27.8619 21.8851 28.1767 22.1999 28.1767 22.5882ZM28.1767 30.5432C28.1767 30.9315 27.8619 31.2463 27.4736 31.2463H25.2173C24.829 31.2463 24.5142 30.9315 24.5142 30.5432C24.5142 30.1549 24.829 29.8401 25.2173 29.8401H27.4736C27.8619 29.8401 28.1767 30.1549 28.1767 30.5432ZM13.4906 24.8233C10.1961 24.8233 7.51576 27.5036 7.51576 30.7981C7.51576 34.0927 10.1961 36.773 13.4906 36.773C16.7851 36.773 19.4654 34.0927 19.4654 30.7981C19.4654 27.5036 16.7851 24.8233 13.4906 24.8233ZM13.4906 35.3667C10.9714 35.3667 8.92201 33.3173 8.92201 30.7981C8.92201 28.279 10.9714 26.2296 13.4906 26.2296C16.0097 26.2296 18.0591 28.279 18.0591 30.7981C18.0591 33.3173 16.0097 35.3667 13.4906 35.3667ZM16.3559 28.7626C16.6319 29.0358 16.6339 29.4811 16.3606 29.7569L13.3172 32.8289C13.1797 32.9676 12.9987 33.0372 12.8176 33.0372C12.6405 33.0372 12.4635 32.9708 12.3268 32.8376L10.6291 31.1827C10.351 30.9117 10.3453 30.4666 10.6164 30.1885C10.8874 29.9105 11.3325 29.9047 11.6106 30.1758L12.8089 31.3438L15.3615 28.7672C15.6349 28.4912 16.0802 28.4893 16.3559 28.7626Z" fill="#4A4A4A"></path>
</svg>`,
            }} i={0} message={{
              question: "",
              answer: "",
              final_report: false,
              suggestions: [],
              clarification: "",
            }} handleSuggestion={() => {
            }}/>
          </div>
          <p><span
            dangerouslySetInnerHTML={{
              __html: t("explanation 3 submit", {
                interpolation: {escapeValue: false},
              }),
            }}
          /><SendImage enoughText={true} className="inline w-6 h-6"/></p>

          <br/>
          <p>{t("explanation 4 steps", {toolName: toolName})}</p>
          <img
            src={"screenshots/progress-indicator.png"}
            alt="Progress indicator"
            className="mx-auto mt-4 mb-5 w-full max-w-3xl"
          />
          <p>
            {t("explanation 5 lightbulb", {toolName: toolName})}{" "}
            <FaRegLightbulb className="inline fill-[#0084d7] w-6 h-6"/>
          </p>
          <br/>
          <p>
            {t("explanation 6 session")}{" "}
            <VscExtensions className="inline fill-[#0084d7] w-6 h-6"/>
          </p>
          <br/>
          <p>
            {t("explanation 7 end")}{" "}
            <ImSwitch className="inline relative fill-[#055D94]"/>
          </p>
        </IntroSection>
      </section>
    </GenericDialogue>
  );
}
